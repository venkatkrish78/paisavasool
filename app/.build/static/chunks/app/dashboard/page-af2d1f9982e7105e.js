(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4722:function(e,t,r){Promise.resolve().then(r.bind(r,2559)),Promise.resolve().then(r.t.bind(r,1965,23))},2559:function(e,t,r){"use strict";r.d(t,{ShoppingLists:function(){return v}});var n=r(784),i=r(1960),s=r(6564),a=r(3866),o=r(6070),c=r(4705),l=r(5861),d=r(398);let u=(0,r(6382).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var f=r(4131),p=r(9218),h=r(395),m=r(5796),g=r(9026),y=r(1789);function v(){let[e,t]=(0,i.useState)([]),[r,v]=(0,i.useState)(!0),x=(0,a.useRouter)(),{toast:b}=(0,h.pm)(),{ref:N,inView:w}=(0,p.YD)({triggerOnce:!1,threshold:.1});(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/shopping-lists");if(!e.ok)throw Error("Failed to fetch shopping lists");let r=await e.json();t(r)}catch(e){b({title:"Error",description:"Failed to load shopping lists. Please refresh the page.",variant:"destructive"})}finally{v(!1)}})()},[b]);let j=async r=>{if(confirm("Are you sure you want to delete this shopping list?"))try{if(!(await fetch("/api/shopping-lists/".concat(r),{method:"DELETE"})).ok)throw Error("Failed to delete shopping list");t(e.filter(e=>e.id!==r)),b({title:"Success",description:"Shopping list deleted successfully"})}catch(e){b({title:"Error",description:"Failed to delete shopping list",variant:"destructive"})}},S={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return r?(0,n.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Your Shopping Lists"}),(0,n.jsxs)(m.z,{onClick:()=>x.push("/dashboard/lists/new"),children:[(0,n.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"New List"]})]}),0===e.length?(0,n.jsx)(g.Zb,{className:"bg-muted/50",children:(0,n.jsxs)(g.aY,{className:"pt-6 text-center",children:[(0,n.jsx)("p",{className:"mb-4",children:"You don't have any shopping lists yet."}),(0,n.jsxs)(m.z,{onClick:()=>x.push("/dashboard/lists/new"),children:[(0,n.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Your First List"]})]})}):(0,n.jsx)(o.E.div,{ref:N,variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:w?"show":"hidden",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,n.jsx)(o.E.div,{variants:S,children:(0,n.jsxs)(g.Zb,{className:"h-full flex flex-col hover:shadow-md transition-all",children:[(0,n.jsx)(g.Ol,{children:(0,n.jsxs)(g.ll,{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(l.Z,{className:"h-5 w-5 mr-2 text-primary"}),(0,n.jsx)("span",{className:"truncate",children:e.name})]}),(0,n.jsxs)(y.C,{variant:"secondary",children:[e.items.length," ",1===e.items.length?"item":"items"]})]})}),(0,n.jsxs)(g.aY,{children:[(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),e.items.length>0?(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("p",{className:"text-sm font-medium mb-2",children:"Items:"}),(0,n.jsxs)("ul",{className:"text-sm space-y-1",children:[e.items.slice(0,3).map(e=>(0,n.jsx)("li",{className:"truncate",children:e.name},e.id)),e.items.length>3&&(0,n.jsxs)("li",{className:"text-muted-foreground",children:["+ ",e.items.length-3," more"]})]})]}):(0,n.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"No items added yet"})]}),(0,n.jsxs)(g.eW,{className:"flex justify-between mt-auto",children:[(0,n.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>j(e.id),children:[(0,n.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Delete"]}),(0,n.jsxs)("div",{className:"space-x-2",children:[(0,n.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>x.push("/dashboard/lists/".concat(e.id,"/edit")),children:[(0,n.jsx)(u,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,n.jsx)(m.z,{size:"sm",asChild:!0,children:(0,n.jsxs)(s.default,{href:"/dashboard/lists/".concat(e.id),children:[(0,n.jsx)(f.Z,{className:"h-4 w-4 mr-1"}),"View"]})})]})]})]})},e.id))})]})}},1789:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(784);r(1960);var i=r(664),s=r(5518);let a=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...i}=e;return(0,n.jsx)("div",{className:(0,s.cn)(a({variant:r}),t),...i})}},5796:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var n=r(784),i=r(1960),s=r(2310),a=r(664),o=r(5518);let c=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-green-600 text-white hover:bg-green-700"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,t)=>{let{className:r,variant:i,size:a,asChild:l=!1,...d}=e,u=l?s.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(c({variant:i,size:a,className:r})),ref:t,...d})});l.displayName="Button"},9026:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return a},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var n=r(784),i=r(1960),s=r(5518);let a=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all hover:shadow-md",r),...i})});a.displayName="Card";let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...i})});o.displayName="CardHeader";let c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...i})});c.displayName="CardTitle";let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...i})});l.displayName="CardDescription";let d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...i})});d.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...i})});u.displayName="CardFooter"},395:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(1960);let i=0,s=new Map,a=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=o(l,e),c.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(i=(i+1)%Number.MAX_VALUE).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(l);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},5518:function(e,t,r){"use strict";r.d(t,{cn:function(){return s},np:function(){return o},xG:function(){return a}});var n=r(3201),i=r(3298);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,n.W)(t))}function a(e){if(null==e||isNaN(e))return"₹0.00";try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e)}catch(t){return console.error("Error formatting currency:",t),"₹".concat(e.toFixed(2))}}function o(e){console.log("Optimizing shopping list with items:",e?e.length:0);let t={platformItems:{},savings:0,totalCost:0,originalCost:0};if(!e||!Array.isArray(e)||0===e.length)return console.log("No valid items to optimize"),t;try{var r,n;let i=new Set,s=0;return e.forEach(e=>{if(!e||!e.prices||!Array.isArray(e.prices)||0===e.prices.length){console.log("Skipping item with no valid prices:",null==e?void 0:e.name);return}let r=e.prices.filter(e=>e&&e.available&&"number"==typeof e.price&&!isNaN(e.price));if(0===r.length){console.log("No available prices for item:",e.name);return}r.forEach(e=>{e&&e.platform&&i.add(e.platform)});let n=r.reduce((e,t)=>e&&t?"number"!=typeof e.price||"number"!=typeof t.price?"number"==typeof e.price?e:t:t.price<e.price?t:e:e||t,r[0]);if(n&&"number"==typeof n.price&&!isNaN(n.price)){let r="number"!=typeof e.quantity||isNaN(e.quantity)?1:e.quantity;t.totalCost+=n.price*r}}),console.log("Identified platforms:",Array.from(i)),console.log("Initial optimized cost:",t.totalCost),Array.from(i).forEach(t=>{if(!t)return;let r=0,n=0;e.forEach(e=>{if(!e||!e.prices||!Array.isArray(e.prices))return;let i=e.prices.find(e=>e&&e.platform===t&&e.available&&"number"==typeof e.price&&!isNaN(e.price));if(i){let t="number"!=typeof e.quantity||isNaN(e.quantity)?1:e.quantity;r+=i.price*t,n++}});let i=e.filter(e=>e&&e.prices&&Array.isArray(e.prices)&&e.prices.length>0);n===i.length&&n>0&&(0===s||r<s)&&(s=r,console.log("New best single platform: ".concat(t," with cost: ").concat(s)))}),t.originalCost=s>0?s:t.totalCost,t.savings=(r=t.originalCost,n=t.totalCost,"number"!=typeof r||"number"!=typeof n||isNaN(r)||isNaN(n)?0:Math.max(0,r-n)),console.log("Original cost: ".concat(t.originalCost,", Optimized cost: ").concat(t.totalCost,", Savings: ").concat(t.savings)),e.forEach(e=>{if(!e||!e.prices||!Array.isArray(e.prices)||0===e.prices.length)return;let r=e.prices.filter(e=>e&&e.available&&"number"==typeof e.price&&!isNaN(e.price));if(0===r.length)return;let n=r.reduce((e,t)=>e&&t?"number"!=typeof e.price||"number"!=typeof t.price?"number"==typeof e.price?e:t:t.price<e.price?t:e:e||t,r[0]);if(!n||!n.platform)return;let i=n.platform;t.platformItems[i]||(t.platformItems[i]=[]),t.platformItems[i].push({...e,bestPrice:n})}),console.log("Optimized shopping across ".concat(Object.keys(t.platformItems).length," platforms")),t}catch(e){return console.error("Error in optimizeShoppingList:",e),t}}},4131:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(6382).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},4705:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(6382).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5861:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(6382).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},398:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(6382).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6564:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var n=r(1965),i=r.n(n)},3866:function(e,t,r){"use strict";var n=r(490);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},9218:function(e,t,r){"use strict";r.d(t,{YD:function(){return l}});var n=r(1960),i=Object.defineProperty,s=new Map,a=new WeakMap,o=0,c=void 0;function l(){var e;let{threshold:t,delay:r,trackVisibility:i,rootMargin:l,root:d,triggerOnce:u,skip:f,initialInView:p,fallbackInView:h,onChange:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[g,y]=n.useState(null),v=n.useRef(),[x,b]=n.useState({inView:!!p,entry:void 0});v.current=m,n.useEffect(()=>{let e;if(!f&&g)return e=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c;if(void 0===window.IntersectionObserver&&void 0!==n){let i=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}let{id:i,observer:l,elements:d}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var r;return"".concat(t,"_").concat("root"===t?(r=e.root)?(a.has(r)||(o+=1,a.set(r,o.toString())),a.get(r)):"0":e[t])}).toString(),r=s.get(t);if(!r){let n;let i=new Map,a=new IntersectionObserver(t=>{t.forEach(t=>{var r;let s=t.isIntersecting&&n.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=s),null==(r=i.get(t.target))||r.forEach(e=>{e(s,t)})})},e);n=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:a,elements:i},s.set(t,r)}return r}(r),u=d.get(e)||[];return d.has(e)||d.set(e,u),u.push(t),l.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(d.delete(e),l.unobserve(e)),0===d.size&&(l.disconnect(),s.delete(i))}}(g,(t,r)=>{b({inView:t,entry:r}),v.current&&v.current(t,r),r.isIntersecting&&u&&e&&(e(),e=void 0)},{root:d,rootMargin:l,threshold:t,trackVisibility:i,delay:r},h),()=>{e&&e()}},[Array.isArray(t)?t.toString():t,g,d,l,u,f,i,h,r]);let N=null==(e=x.entry)?void 0:e.target,w=n.useRef();g||!N||u||f||w.current===N||(w.current=N,b({inView:!!p,entry:void 0}));let j=[y,x.inView,x.entry];return j.ref=j[0],j.inView=j[1],j.entry=j[2],j}n.Component}},function(e){e.O(0,[374,965,427,275,744],function(){return e(e.s=4722)}),_N_E=e.O()}]);