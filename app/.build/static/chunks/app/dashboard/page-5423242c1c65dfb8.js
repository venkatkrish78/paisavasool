(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4722:function(e,s,t){Promise.resolve().then(t.bind(t,2559)),Promise.resolve().then(t.t.bind(t,1965,23))},2559:function(e,s,t){"use strict";t.d(s,{ShoppingLists:function(){return g}});var i=t(784),a=t(1960),l=t(6564),n=t(3866),r=t(1555),c=t(4705),d=t(5861),h=t(398);let o=(0,t(6382).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var m=t(4131),u=t(9218),x=t(395),p=t(5796),f=t(9026),j=t(1789);function g(){let[e,s]=(0,a.useState)([]),[t,g]=(0,a.useState)(!0),N=(0,n.useRouter)(),{toast:v}=(0,x.pm)(),{ref:y,inView:w}=(0,u.YD)({triggerOnce:!1,threshold:.1});(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/shopping-lists");if(!e.ok)throw Error("Failed to fetch shopping lists");let t=await e.json();s(t)}catch(e){v({title:"Error",description:"Failed to load shopping lists. Please refresh the page.",variant:"destructive"})}finally{g(!1)}})()},[v]);let b=async t=>{if(confirm("Are you sure you want to delete this shopping list?"))try{if(!(await fetch("/api/shopping-lists/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete shopping list");s(e.filter(e=>e.id!==t)),v({title:"Success",description:"Shopping list deleted successfully"})}catch(e){v({title:"Error",description:"Failed to delete shopping list",variant:"destructive"})}},E={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return t?(0,i.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold",children:"Your Shopping Lists"}),(0,i.jsxs)(p.z,{onClick:()=>N.push("/dashboard/lists/new"),children:[(0,i.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"New List"]})]}),0===e.length?(0,i.jsx)(f.Zb,{className:"bg-muted/50",children:(0,i.jsxs)(f.aY,{className:"pt-6 text-center",children:[(0,i.jsx)("p",{className:"mb-4",children:"You don't have any shopping lists yet."}),(0,i.jsxs)(p.z,{onClick:()=>N.push("/dashboard/lists/new"),children:[(0,i.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Your First List"]})]})}):(0,i.jsx)(r.E.div,{ref:y,variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:w?"show":"hidden",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,i.jsx)(r.E.div,{variants:E,children:(0,i.jsxs)(f.Zb,{className:"h-full flex flex-col hover:shadow-md transition-all",children:[(0,i.jsx)(f.Ol,{children:(0,i.jsxs)(f.ll,{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(d.Z,{className:"h-5 w-5 mr-2 text-primary"}),(0,i.jsx)("span",{className:"truncate",children:e.name})]}),(0,i.jsxs)(j.C,{variant:"secondary",children:[e.items.length," ",1===e.items.length?"item":"items"]})]})}),(0,i.jsxs)(f.aY,{children:[(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),e.items.length>0?(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium mb-2",children:"Items:"}),(0,i.jsxs)("ul",{className:"text-sm space-y-1",children:[e.items.slice(0,3).map(e=>(0,i.jsx)("li",{className:"truncate",children:e.name},e.id)),e.items.length>3&&(0,i.jsxs)("li",{className:"text-muted-foreground",children:["+ ",e.items.length-3," more"]})]})]}):(0,i.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"No items added yet"})]}),(0,i.jsxs)(f.eW,{className:"flex justify-between mt-auto",children:[(0,i.jsxs)(p.z,{variant:"outline",size:"sm",onClick:()=>b(e.id),children:[(0,i.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),"Delete"]}),(0,i.jsxs)("div",{className:"space-x-2",children:[(0,i.jsxs)(p.z,{variant:"outline",size:"sm",onClick:()=>N.push("/dashboard/lists/".concat(e.id,"/edit")),children:[(0,i.jsx)(o,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,i.jsx)(p.z,{size:"sm",asChild:!0,children:(0,i.jsxs)(l.default,{href:"/dashboard/lists/".concat(e.id),children:[(0,i.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),"View"]})})]})]})]})},e.id))})]})}},6564:function(e,s,t){"use strict";t.d(s,{default:function(){return a.a}});var i=t(1965),a=t.n(i)}},function(e){e.O(0,[813,965,387,427,275,744],function(){return e(e.s=4722)}),_N_E=e.O()}]);