(()=>{var e={};e.id=687,e.ids=[687],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3615:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>f,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d}),r(8107),r(9910),r(6289);var n=r(2752),s=r(7380),i=r(459),a=r.n(i),o=r(8119),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["lists",{children:["[id]",{children:["add-item",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8107)),"/home/ubuntu/grocery_price_comparison/app/app/dashboard/lists/[id]/add-item/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9910)),"/home/ubuntu/grocery_price_comparison/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6289,23)),"next/dist/client/components/not-found-error"]}],u=["/home/ubuntu/grocery_price_comparison/app/app/dashboard/lists/[id]/add-item/page.tsx"],c="/dashboard/lists/[id]/add-item/page",f={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/lists/[id]/add-item/page",pathname:"/dashboard/lists/[id]/add-item",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2923:(e,t,r)=>{Promise.resolve().then(r.bind(r,3276)),Promise.resolve().then(r.t.bind(r,5552,23))},3276:(e,t,r)=>{"use strict";r.d(t,{ItemForm:()=>S});var n=r(4848),s=r(5642),i=r(8598),a=r(3697),o=r(93);let l=(0,o.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),d=(0,o.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var u=r(7595),c=r(1276),f=r(9631),p=r(3254);function m(){let e=(0,s.useRef)(!1);return(0,p.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var h=r(9302),g=r(1242),x=r(2924);class y extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function v({children:e,isPresent:t}){let r=(0,s.useId)(),n=(0,s.useRef)(null),i=(0,s.useRef)({width:0,height:0,top:0,left:0});return(0,s.useInsertionEffect)(()=>{let{width:e,height:s,top:a,left:o}=i.current;if(t||!n.current||!e||!s)return;n.current.dataset.motionPopId=r;let l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),s.createElement(y,{isPresent:t,childRef:n,sizeRef:i},s.cloneElement(e,{ref:n}))}let b=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:o})=>{let l=(0,x.h)(j),d=(0,s.useId)(),u=(0,s.useMemo)(()=>({id:d,initial:t,isPresent:r,custom:i,onExitComplete:e=>{for(let t of(l.set(e,!0),l.values()))if(!t)return;n&&n()},register:e=>(l.set(e,!1),()=>l.delete(e))}),a?void 0:[r]);return(0,s.useMemo)(()=>{l.forEach((e,t)=>l.set(t,!1))},[r]),s.useEffect(()=>{r||l.size||!n||n()},[r]),"popLayout"===o&&(e=s.createElement(v,{isPresent:r},e)),s.createElement(g.O.Provider,{value:u},e)};function j(){return new Map}var w=r(4052),R=r(6600);let N=e=>e.key||"",_=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{var l;(0,R.k)(!i,"Replace exitBeforeEnter with mode='wait'");let d=(0,s.useContext)(w.p).forceRender||function(){let e=m(),[t,r]=(0,s.useState)(0),n=(0,s.useCallback)(()=>{e.current&&r(t+1)},[t]);return[(0,s.useCallback)(()=>h.Wi.postRender(n),[n]),t]}()[0],u=m(),c=function(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}(e),f=c,g=(0,s.useRef)(new Map).current,x=(0,s.useRef)(f),y=(0,s.useRef)(new Map).current,v=(0,s.useRef)(!0);if((0,p.L)(()=>{v.current=!1,function(e,t){e.forEach(e=>{let r=N(e);t.set(r,e)})}(c,y),x.current=f}),l=()=>{v.current=!0,y.clear(),g.clear()},(0,s.useEffect)(()=>()=>l(),[]),v.current)return s.createElement(s.Fragment,null,f.map(e=>s.createElement(b,{key:N(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:a,mode:o},e)));f=[...f];let j=x.current.map(N),_=c.map(N),E=j.length;for(let e=0;e<E;e++){let t=j[e];-1!==_.indexOf(t)||g.has(t)||g.set(t,void 0)}return"wait"===o&&g.size&&(f=[]),g.forEach((e,r)=>{if(-1!==_.indexOf(r))return;let i=y.get(r);if(!i)return;let l=j.indexOf(r),p=e;p||(p=s.createElement(b,{key:N(i),isPresent:!1,onExitComplete:()=>{g.delete(r);let e=Array.from(y.keys()).filter(e=>!_.includes(e));if(e.forEach(e=>y.delete(e)),x.current=c.filter(t=>{let n=N(t);return n===r||e.includes(n)}),!g.size){if(!1===u.current)return;d(),n&&n()}},custom:t,presenceAffectsLayout:a,mode:o},i),g.set(r,p)),f.splice(l,0,p)}),f=f.map(e=>{let t=e.key;return g.has(t)?e:s.createElement(b,{key:N(e),isPresent:!0,presenceAffectsLayout:a,mode:o},e)}),s.createElement(s.Fragment,null,g.size?f:f.map(e=>(0,s.cloneElement)(e)))};var E=r(1932),P=r(8287),k=r(5205),C=r(391);function S({listId:e}){let[t,r]=(0,s.useState)(""),[o,p]=(0,s.useState)(1),[m,h]=(0,s.useState)(""),[g,x]=(0,s.useState)(!1),[y,v]=(0,s.useState)([]),[b,j]=(0,s.useState)(!1),[w,R]=(0,s.useState)(!1),[N,S]=(0,s.useState)(-1),O=(0,i.useRouter)(),{toast:M}=(0,E.pm)(),A=(0,s.useRef)(null),F=(0,s.useRef)(null),I=async n=>{if(n.preventDefault(),!t.trim()){M({title:"Error",description:"Please enter a name for the item",variant:"destructive"});return}x(!0);try{if(!(await fetch(`/api/shopping-lists/${e}/items`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,quantity:o,unit:m})})).ok)throw Error("Failed to add item");M({title:"Success!",description:"Item added to your shopping list."}),r(""),p(1),h(""),O.refresh()}catch(e){M({title:"Error",description:"Failed to add item. Please try again.",variant:"destructive"})}finally{x(!1)}},T=e=>{r(e),R(!1),S(-1),F.current?.focus()};return n.jsx(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,n.jsxs)(C.Zb,{className:"w-full",children:[n.jsx(C.Ol,{children:(0,n.jsxs)(C.ll,{className:"flex items-center gap-2",children:[n.jsx(a.Z,{className:"h-5 w-5 text-primary"}),"Add New Item"]})}),(0,n.jsxs)("form",{onSubmit:I,children:[n.jsx(C.aY,{children:(0,n.jsxs)("div",{className:"grid w-full items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-1.5 relative",children:[(0,n.jsxs)("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:n.jsx(l,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx(k.I,{ref:F,id:"name",placeholder:"Item name (e.g., Rice, Milk, Apples)",value:t,onChange:e=>r(e.target.value),onKeyDown:e=>{w&&y.length>0&&("ArrowDown"===e.key?(e.preventDefault(),S(e=>e<y.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),S(e=>e>0?e-1:0)):"Enter"===e.key&&N>=0?(e.preventDefault(),T(y[N])):"Escape"===e.key&&(R(!1),S(-1)))},onFocus:()=>t.length>=2&&R(!0),disabled:g,className:"pl-10"}),t&&n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:b?n.jsx(d,{className:"h-4 w-4 text-muted-foreground animate-spin"}):n.jsx("button",{type:"button",onClick:()=>{r(""),v([]),R(!1),F.current?.focus()},className:"text-muted-foreground hover:text-foreground",children:n.jsx(u.Z,{className:"h-4 w-4"})})})]}),n.jsx(_,{children:w&&y.length>0&&n.jsx(f.E.div,{ref:A,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute z-10 mt-1 w-full bg-background border rounded-md shadow-lg max-h-60 overflow-y-auto",children:n.jsx("ul",{className:"py-1",children:y.map((e,t)=>n.jsx("li",{className:`px-4 py-2 cursor-pointer hover:bg-muted text-sm ${N===t?"bg-muted":""}`,onClick:()=>T(e),children:e},t))})})})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[n.jsx("div",{className:"flex flex-col space-y-1.5 w-1/3",children:n.jsx(k.I,{id:"quantity",type:"number",min:"1",placeholder:"Qty",value:o,onChange:e=>p(parseInt(e.target.value)||1),disabled:g})}),n.jsx("div",{className:"flex flex-col space-y-1.5 w-2/3",children:n.jsx(k.I,{id:"unit",placeholder:"Unit (e.g., kg, pcs, liters)",value:m,onChange:e=>h(e.target.value),disabled:g})})]})]})}),n.jsx(C.eW,{children:n.jsx(P.z,{type:"submit",className:"w-full",disabled:g,children:g?(0,n.jsxs)(n.Fragment,{children:[n.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):(0,n.jsxs)(n.Fragment,{children:[n.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Add Item"]})})})]})]})})}},391:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>d,Zb:()=>a,aY:()=>u,eW:()=>c,ll:()=>l});var n=r(4848),s=r(5642),i=r(5709);let a=s.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all hover:shadow-md",e),...t}));a.displayName="Card";let o=s.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let u=s.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent";let c=s.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));c.displayName="CardFooter"},5205:(e,t,r)=>{"use strict";r.d(t,{I:()=>a});var n=r(4848),s=r(5642),i=r(5709);let a=s.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));a.displayName="Input"},3697:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(93).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},1276:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(93).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8107:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,dynamic:()=>u});var n=r(2820),s=r(8171),i=r(2410),a=r(8087),o=r(6525);let l=(0,r(7138).createProxy)(String.raw`/home/ubuntu/grocery_price_comparison/app/components/item-form.tsx#ItemForm`);var d=r(9382);let u="force-dynamic";async function c({params:e}){let{id:t}=e,r=await d._.shoppingList.findUnique({where:{id:t}});return r||(0,i.notFound)(),(0,n.jsxs)("div",{className:"container mx-auto max-w-7xl px-4 py-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsx(o.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,n.jsxs)(s.default,{href:`/dashboard/lists/${t}`,children:[n.jsx(a.Z,{className:"h-4 w-4 mr-1"}),"Back to List"]})})}),(0,n.jsxs)("h1",{className:"text-3xl font-bold",children:["Add Item to ",r.name]}),n.jsx("p",{className:"text-muted-foreground",children:"Add grocery items to your shopping list"})]}),n.jsx("div",{className:"max-w-2xl",children:n.jsx(l,{listId:t})})]})}},6525:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var n=r(2820),s=r(2607),i=r(212),a=r(4470),o=r(9623);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-green-600 text-white hover:bg-green-700"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},d)=>{let u=s?i.g7:"button";return n.jsx(u,{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:d,...a})});d.displayName="Button"},9382:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});let n=require("@prisma/client"),s=global.prisma||new n.PrismaClient({log:["query"]})},9623:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var n=r(1002),s=r(7290);function i(...e){return(0,s.m6)((0,n.W)(e))}},8087:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(3057).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2410:(e,t,r)=>{"use strict";var n=r(7962);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}})},7962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return n.RedirectType},notFound:function(){return s.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect}});let n=r(8609),s=r(1755);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1755:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return s},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5624:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8609:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return m},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return f},isRedirectError:function(){return c},permanentRedirect:function(){return u},redirect:function(){return d}});let s=r(4580),i=r(2934),a=r(5624),o="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let n=Error(o);n.digest=o+";"+t+";"+e+";"+r+";";let i=s.requestAsyncStorage.getStore();return i&&(n.mutableCookies=i.mutableCookies),n}function d(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function u(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,s]=e.digest.split(";",4),i=Number(s);return t===o&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(i)&&i in a.RedirectStatusCode}function f(e){return c(e)?e.digest.split(";",3)[2]:null}function p(e){if(!c(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function m(e){if(!c(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[923,724,709,296],()=>r(3615));module.exports=n})();